<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Template2</title>
</head>
<body>
    <main>
        <nav class="nav1">
            <div class="nav-side1">
                <span>Home</span>
                <span>categories</span>
                <span>about</span>
            </div>
            <div class="nav-side2">
                <span>Kinks</span>
            </div>
            <div class="nav-side3">
                <span>account</span>
                <span>contact</span>
                <span><img src="icons/cart.png" alt=""></span>
            </div>
        </nav>
        <nav class="nav2">
            <span class="loe">Kinks</span>
            <div class="spin">
                <div class="pin">
                    <div class="spin2"></div>
                    <div class="spin2"></div>
                    <div class="spin2"></div>
                </div>
            </div>
            <div class="spin1">
                <div class="spin-flow">
                    <div class="back-spin">
                        <img src="icons/left2.png" alt="">
                    </div>
                    <div class="fspin">
                        <div class="cart-dig"><img src="icons/cartt.png" alt=""><span>Cart</span></div>
                        <div class="numb"><span>0</span></div>
                    </div>
                    <span>Home</span>
                    <span>Categories</span>
                    <span>About</span>
                    <span>Account</span>
                    <span>Contact</span>
                </div>
            </div>
            </div>
        </nav>
        <section class="body">
            <section>
                <div class="top1">
                    <span></span>
                    <span></span>
                </div>
                <div class="body1">
                    <div class="double1">
                        <div class="first1">
                            <div class="first1top">
                                <span>over</span>
                                <span>10k</span>
                                <span>sold</span>
                            </div>
                            <div class="first1line"></div>
                            <div class="first11">
                                <div class="slider">
                                    <div class="color-pick">
                                    </div>
                                    <div class="sliderfirst1">
                                        <div class="flip">
                                            <img class="acive1" src="">
                                            <img class="acive2" alt="" src="">
                                        </div>
                                        <div class="home-shadow"></div>
                                    </div>
                                </div>
                                <div class="buttons">
                                    <div class="button1"><img src="icons/left.png" alt=""></div>
                                    <div class="button2"><img src="icons/right.png" alt=""></div>
                                </div>
                                <div class="cashout">
                                    <div class="cashout1">
                                        <div class="ski">
                                            <span class="ccash"></span> <div class="cart"><img src="icons/cartt.png" alt=""><span class="omoo">Add to cart</span></div>
                                        </div> 
                                        <span class="ccashname">Name:&nbsp; <span class="empa"></span></span>  
                                        <div class="ccashcolor"><span class="norm">Color: </span> <div class="ownu"><div class="colorgrey"></div></div><span class="norma">Size: &nbsp;<span class="emp"></span></span></div>
                                        <div class="ccasho"> <span class="ccashquan">Quantity: </span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="second1">
                            <img alt="">
                            <div class="showbos">
                                <div class="showbow">
                                    <div class="explore">
                                        <span>Explore The New Collection</span>
                                    </div>
                                    <div class="explore-body">
                                        <!-- <div class="explore-body1"></div> -->
                                        <div class="explore-body-slide">
                                            <div class="eslider"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="third1">
                        <div class="cashout">
                            <div class="cashout1">
                                <div class="ski">
                                    <span class="ccash"></span> <div class="cart"><img src="icons/cartt.png" alt=""><span class="omoo">Add to cart</span></div>
                                </div>
                                <span class="ccashname">Name:&nbsp; <span class="empa"></span></span>  
                                <div class="ccashcolor"><span class="norm">Color: </span> <div class="ownu"><div class="colorgrey"></div></div><span class="norma">Size: &nbsp;<span class="emp"></span></span></div>
                                <div class="ccasho"> <span class="ccashquan">Quantity: </span></div>
                            </div>
                        </div>
                        <div class="reviews">
                            <div id="revimg">
                                <div class="reviews-head">
                                    <span>Reviews</span>
                                </div>
                                <div class="reviewimg">
                                    <img src="icons/marie.jpg" alt="">
                                    <img src="icons/marie.jpg" alt="">
                                    <img src="icons/marie.jpg" alt="">
                                    <span>+10 more</span>
                                </div>
                            </div>
                            <div class="reviewline"></div>
                            <div class="reviewtext">
                                "Lorem ipsum dolor sit amet loribus vitae nobis modi? Tempora eos expedita minus."
                            </div>
                            <div class="review-loca-go">
                                <span>Next</span>
                            </div>
                        </div>
                        <div class="showbo1">
                            <div class="showbo11">
                                <div class="explore">
                                    <div class="exbox"></div>
                                    <span>Explore The New Collection</span>
                                </div>
                                <div class="explore-body">
                                    <div class="explore-body1">
                                    </div>
                                    <div class="explore-body-slide">
                                        <div class="eslider"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </section>
    </main>
    <script>
    const elements = {
        title1: document.querySelector(".top1 span:first-child"),
        title2: document.querySelectorAll(".ccashname span"),
        size: document.querySelectorAll(".emp"),
        info: document.querySelector(".top1 span:last-child"),
        pick: document.querySelector(".color-pick"),
        pic2: document.querySelector(".second1 img"),
        price: document.querySelectorAll(".ccash"),
        spin: document.querySelector(".spin"),
        spin1: document.querySelector(".back-spin"),
        spin2: document.querySelector(".spin1"),
        button1: document.querySelector(".button1"),
        button2: document.querySelector(".button2"),
        flip: document.querySelector(".flip"),
        flip1: document.querySelector(".acive1"),
        flip2: document.querySelector(".acive2"),
    };

    const products = [
        {
            title: "shrug top",
            info: "The perfect accessory to improve your all-day look",
            price: "20",
            pic: "icons/dress_shirt_PNG.png",
            color: [
                ["colorgrey", "icons/dress_shirt_PNG.png"],
                ["colorgreen", "icons/shrug-top.png"],
                ["colorblue", "icons/dress_shirt_PNG.png"],
                ["colorblack", "icons/shrug-top.png"]
            ],
            size: ["M", "S"]
        },
        {
            title: "Hair band",
            info: "Style up your day with this perfect band",
            price: "10",
            pic: "icons/shrug-top.png",
            color: [
                ["colorgrey", ""],
                ["colorgreen", ""],
                ["colorblue", ""],
                ["colorblack", ""]
            ],
            size:  ["M", "XL"]
        }
    ];

    let count = 0;

    updatePage();

    function updatePage() {
        const { title1, title2, size, info, pick, price, flip1, pic2 } = elements;
        
        title1.innerHTML = "";
        title2.innerHTML = "";
        size.innerHTML = "";
        info.innerHTML = "";
        pick.innerHTML = "";
        price.innerHTML = "";

        const product = products[count];
        
        title1.innerHTML = `Classy ${product.title}`;
        info.innerHTML = product.info;
        price.innerHTML = `$ ${product.price}`;
        title2.innerHTML = product.title;

        product.color.forEach(function (value) {
            pick.innerHTML += `<div class="ownu"><div class="${value[0]}"></div></div>`;
        });

        for(let i = 0; i < 2; i++){
            size[i].innerHTML = "";
            title2[i].innerHTML = "";
            price[i].innerHTML = "";
            product.size.forEach(function (value) {
            size[i].innerHTML += `<span class="empaa">${value}</span>`;
            });
            title2[i].innerHTML = product.title;
            price[i].innerHTML = `$ ${product.price}`;
        }
        
        const picksel = document.querySelector(".color-pick div:first-child");
        picksel.setAttribute("id", "active");
        flip1.setAttribute("src", product.color[0][1]);
        pic2.setAttribute("src", product.pic);
    }
    // Sample array of items
    const items = ['Item 1', 'Item 2', 'Item 3', 'Item 4', 'Item 5'];
    const scrollContainer = document.querySelector('.explore-body1');
    const exor = document.querySelectorAll('.exor');

    function populateItems() {
    scrollContainer.innerHTML = '';

    const reversedItems = items.slice().reverse(); 
    reversedItems.forEach((item) => {
        const div = document.createElement('div');
        div.className = 'exor';
        div.innerHTML = "<div class='single-explore'></div>";
        scrollContainer.appendChild(div);
    });
    }

    function loadMoreItems(e) {
    const maxScrollLeft = scrollContainer.scrollWidth - scrollContainer.clientWidth;

    if (scrollContainer.scrollLeft >= maxScrollLeft) {
        const newItem = `Item ${items.length + 1}`;
        items.push(newItem);

        populateItems();

        scrollContainer.scrollLeft = maxScrollLeft;
    }
    if (scrollContainer.scrollLeft === 0) {
        const newItem = `Item ${items.length + 1}`;
        items.push(newItem);

        populateItems();

        scrollContainer.scrollLeft = scrollContainer.scrollWidth / 2;
    }
    }

    populateItems();


    function toggleSpinClasses() {
        const { spin, spin2 } = elements;
        spin.classList.toggle("add");
        spin2.classList.toggle("add");
    }

    function updateCountAndPage(direction) {
        const { pick } = elements;

        if (direction === "prev" && count > 0) {
            count--;
        } else if (direction === "next" && count < products.length - 1) {
            count++;
        }

        updatePage();
        pick.scrollLeft = 0;
    }
    
    let flipc = 1;

    function handleColorPickClick(event) {
        const { flip, flip1, flip2 } = elements;

        for (let j = 0; j < products[count].color.length; j++) {
            if (event.target.classList[0] === products[count].color[j][0]) {
                let code = products[count].color[j][1];

                if (flipc === 1) {
                    flip2.setAttribute("src", code);
                    setPickActive(j+1);
                } else {
                    flip1.setAttribute("src", code);
                    setPickActive(j+1);
                }

                flip.classList.toggle("peri");
                flipc = 3 - flipc;
                break;
            }
        }
    }

    function handlePickScroll() {
        const { pick } = elements;

        if (pick.scrollLeft <= 21) {
            pick.scrollLeft = 0;
            setPickActive(1);
        } else if (pick.scrollLeft <= 61 && pick.scrollLeft > 21) {
            pick.scrollLeft = 41;
            setPickActive(2);
        } else if (pick.scrollLeft <= 99 && pick.scrollLeft > 61) {
            pick.scrollLeft = 81;
            setPickActive(3);
        } else {
            setPickActive(4);
            pick.scrollLeft = 120;
        }
    }

    function setPickActive(num) {
        const prevact = document.querySelector(".ownu#active");
        const newact = document.querySelector(`.ownu:nth-child(${num})`);
        prevact.setAttribute("id", "");
        newact.setAttribute("id", "active");
    }

    document.onreadystatechange = function () {
        if (document.readyState !== "complete") {
            document.querySelector("body").style.visibility = "hidden";
        } else {
            document.querySelector("body").style.visibility = "visible";
        }
    };

    elements.spin.addEventListener("click", toggleSpinClasses);
    elements.spin1.addEventListener("click", toggleSpinClasses);
    elements.button1.addEventListener("click", () => updateCountAndPage("prev"));
    elements.button2.addEventListener("click", () => updateCountAndPage("next"));
    scrollContainer.addEventListener('scroll', loadMoreItems);


    const pickcoll = document.querySelectorAll(".ownu");

    pickcoll.forEach(col => {
        col.addEventListener("click", handleColorPickClick);
    });

    elements.pick.addEventListener("touchend", handlePickScroll);
    </script>
</body>
</html>
